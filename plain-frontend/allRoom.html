<!DOCTYPE html>
<html>
<head>
  <title>Room Information</title>
</head>
<body>
  <h1>Room Information</h1>
  <div id="room-list"></div>

  <script>
    // Function to format date and time in local timezone
    function formatDateTime(dateTimeString) {
      const options = { timeZone: 'Asia/Bangkok', year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric' };
      return new Date(dateTimeString).toLocaleString('en-US', options);
    }

// Function to format date and time in Bangkok timezone
function formatDateTime(dateTimeString) {
  const options = { timeZone: 'Asia/Bangkok', year: '2-digit', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit', hour12: false };
  const formattedDate = new Date(dateTimeString).toLocaleDateString('en-US', options);
  const formattedTime = new Date(dateTimeString).toLocaleTimeString('en-US', options);
  return `${formattedDate} ${formattedTime}`;
}



// Fetch room data from the API
fetch('http://localhost:5000/api/rooms/show')
  .then(response => response.json())
  .then(data => {
    const roomListElement = document.getElementById('room-list');
    data.forEach(room => {
      const roomElement = document.createElement('div');
      const formattedStart = room.start ? formatDateTime(room.start) : '';
      const formattedEnd = room.end ? formatDateTime(room.end) : '';
      let roomDetails = '';

      for (const key in room) {
        if (key !== 'name' && key !== 'roomId') {
          let value = room[key];

          if (key === 'reserveDate' && Array.isArray(value)) {
            value = value.map(dateRange => `[${formatDateTime(dateRange[0])},${formatDateTime(dateRange[1])}]`).join('<br>');
          }

          roomDetails += `<p>${key}: ${value}</p>`;
        }
      }

      roomElement.innerHTML = `
        <h3>${room.name}</h3>
        <p>Room ID: ${room.roomId}</p>  
        ${roomDetails}
        ${room.start ? `<p>Room Start: ${formattedStart}</p>` : ''}
        ${room.end ? `<p>Room End: ${formattedEnd}</p>` : ''}
      `;
      roomListElement.appendChild(roomElement);
    });
  })
  .catch(error => {
    console.error('Error:', error);
  });



  </script>
</body>
</html>
